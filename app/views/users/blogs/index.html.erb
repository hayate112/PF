<h2>ブログ一覧</h2>

<%= link_to '閲覧履歴一覧', blog_history_blogs_path %>

<% @genres.each do |genre| %>
  <tr>
    <td>
      <%= link_to genre.name, blog_genre_search_blogs_path('search[value]': genre.id, 'search[how]': "match") %>
    </td>
  </tr>
<% end %>

<%= form_with model: @blog, url: blog_search_blogs_path, method: :get, local: true do |f| %>
  <%= f.select :keyword, [ ['投稿か新しい順', 'new'], ['投稿か古い順', 'old'], ['いいねが多い順', 'likes'], ['いいねが少ない順', 'dislikes'] ] %>
  <%= f.submit '並べ替える' %>
<% end %>

<% @blogs.each do |blog| %>
  <%= link_to blog_path(blog.id) do %>
    <div>
      <div><%= blog.title %></div>
      <div><%= blog.body %></div>
      <div>
        <% blog.blog_images.first(1).each do |image| %>
          <%= attachment_image_tag image, :image, :fill, 120, 80, fallback: "no_image.jpg", size: "120x80" %>
        <% end %>
      </div>
      <div><%= blog.genre.name %></div>
    </div>
  <% end %>
<% end %>
<%= paginate @blogs %>